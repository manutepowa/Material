function Loader(){$(".section").css("display","table"),$(".section").css("visibility","visible")}function loadMateriales(){var a="../function/loadMateriales.php";$("#t_materiales tbody").html("");var b=0;$.ajax({url:a,beforeSend:Loader}).done(function(a){var c=$.parseJSON(a);if(0==c.length){var d="<tr class='center'><td colspan='6'>No hay ningún material añadido en la web.</td></tr>";$(d).appendTo("#t_materiales tbody")}else $.each(c,function(a,d){if(0!=a&&d.id_material==c[a-1].id_material)d.fecha_devolucion||($("table[id=t_materiales]>tbody>tr[data-value='"+d.id_material).addClass("negative"),$("table[id=t_materiales]>tbody>tr[data-value='"+d.id_material+"']>td:nth-child(2)").html("Préstamo activo"));else{var e;if(d.fecha_devolucion?e="Ningún prestamo activo":(e="Préstamo activo",b=1),1==b){var f="<tr class='negative' data-value='"+d.id_material+"'>";b=0}else var f="<tr data-value='"+d.id_material+"'>";f+="<td>"+d.descripcion+"</td>",f+="Préstamo activo"==e?"<td>Préstamo activo</td><td class='center aligned'><button id='hist_mat_"+d.id_material+"' class='ui button' title='Ver historial de este material'><i class='history icon'></i>Historial</button></td></tr>":"<td>Sin prestamos activos</td><td class='center aligned'><button id='hist_mat_"+d.id_material+"' class='ui button' title='Ver historial de este material'><i class='history icon'></i>Historial</button></td></tr>",$(f).appendTo("#t_materiales tbody")}}),incluirPaginador("#t_materiales","#paginadorMateriales");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_materiales").css("visibility","visible")})}function loadMaterialesHistorial(a,b){var c="../function/loadMaterialHist.php?id="+b;$("#t_materiales_hist tbody").html("");var d=0;$.ajax({url:c,beforeSend:Loader}).done(function(b){var c=$.parseJSON(b);if($("#materiales_container_hist > p > strong").html(a),0==c.length){var e="<tr class='center'><td colspan='6'>ERROR AL CARGAR LOS PRESTAMOS.</td></tr>";$(e).appendTo("#t_materiales_hist tbody")}else $.each(c,function(a,b){var c;if(b.fecha_devolucion?c=b.fecha_devolucion:(c="No devuelto",d=1),1==d){var e="<tr class='negative' data-value='"+b.id_prestamo+"'>";d=0}else var e="<tr data-value='"+b.id_prestamo+"'>";e+="<td>"+b.nombre+"</td><td>"+b.lugar+"</td><td>"+b.fecha_prestamo+"</td><td>"+c+"</td></tr>",$(e).appendTo("#t_materiales_hist tbody")}),incluirPaginador("#t_materiales_hist","#paginadorMaterialesHist");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_materiales_hist").css("visibility","visible")})}function loadPersonas(){var a="../function/loadPersonas.php";$("#t_personas tbody").html("");var b=0;$.ajax({url:a,beforeSend:Loader}).done(function(a){var c=$.parseJSON(a);if(0==c.length){var d="<tr class='center'><td colspan='6'>No hay ninguna persona añadida en la web.</td></tr>";$(d).appendTo("#t_personas tbody")}else $.each(c,function(a,d){if(0!=a&&d.id_persona==c[a-1].id_persona)d.fecha_devolucion||($("table[id=t_personas]>tbody>tr[data-value='"+d.id_persona).addClass("negative"),$("table[id=t_personas]>tbody>tr[data-value='"+d.id_persona+"']>td:nth-child(2)").html("Préstamo activo"));else{var e;if(d.fecha_devolucion?e="Ningún prestamo activo":(e="Préstamo activo",b=1),1==b){var f="<tr class='negative' data-value='"+d.id_persona+"'>";b=0}else var f="<tr data-value='"+d.id_persona+"'>";f+="<td>"+d.nombre+"</td>",f+="Préstamo activo"==e?"<td>Préstamo activo</td><td class='center aligned'><button id='hist_pers_"+d.id_persona+"' class='ui button' title='Ver historial de esta persona'><i class='history icon'></i>Historial</button></td></tr>":"<td>Sin prestamos activos</td><td class='center aligned'><button id='hist_pers_"+d.id_persona+"' class='ui button' title='Ver historial de esta persona'><i class='history icon'></i>Historial</button></td></tr>",$(f).appendTo("#t_personas tbody")}}),incluirPaginador("#t_personas","#paginadorPersonas");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_personas").css("visibility","visible")})}function loadPersonasHistorial(a,b){var c="../function/loadPersonaHist.php?id="+b;$("#t_personas_hist tbody").html("");var d=0;$.ajax({url:c,beforeSend:Loader}).done(function(b){var c=$.parseJSON(b);if($("#personas_container_hist > p > strong").html(a),0==c.length){var e="<tr class='center'><td colspan='6'>ERROR AL CARGAR LOS PRESTAMOS.</td></tr>";$(e).appendTo("#t_personas_hist tbody")}else $.each(c,function(a,b){if(0!=a&&b.id_prestamo==c[a-1].id_prestamo)$("table[id = t_personas_hist]>tbody>tr[data-value='"+b.id_prestamo+"']>td:first").append(" &nbsp;||&nbsp; "+b.descripcion);else{var e;if(b.fecha_devolucion?e=b.fecha_devolucion:(e="No devuelto",d=1),1==d){var f="<tr class='negative' data-value='"+b.id_prestamo+"'>";d=0}else var f="<tr data-value='"+b.id_prestamo+"'>";f+="<td>"+b.descripcion+"</td><td>"+b.lugar+"</td><td>"+b.fecha_prestamo+"</td><td>"+e+"</td></tr>",$(f).appendTo("#t_personas_hist tbody")}}),incluirPaginador("#t_personas_hist","#paginadorPersonasHist");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_personas_hist").css("visibility","visible")})}function loadLugares(){var a="../function/loadLugares.php";$("#t_lugares tbody").html("");var b=0;$.ajax({url:a,beforeSend:Loader}).done(function(a){var c=$.parseJSON(a);if(0==c.length){var d="<tr class='center'><td colspan='6'>No hay ningún lugar añadido en la web.</td></tr>";$(d).appendTo("#t_lugares tbody")}else $.each(c,function(a,d){if(0!=a&&d.id_lugar==c[a-1].id_lugar)d.fecha_devolucion||($("table[id=t_lugares]>tbody>tr[data-value='"+d.id_lugar).addClass("negative"),$("table[id=t_lugares]>tbody>tr[data-value='"+d.id_lugar+"']>td:nth-child(2)").html("Préstamo activo"));else{var e;if(d.fecha_devolucion?e="Ningún prestamo activo":(e="Préstamo activo",b=1),1==b){var f="<tr class='negative' data-value='"+d.id_lugar+"'>";b=0}else var f="<tr data-value='"+d.id_lugar+"'>";f+="<td>"+d.lugar+"</td>",f+="Préstamo activo"==e?"<td>Préstamo activo</td><td class='center aligned'><button id='hist_lug_"+d.id_lugar+"' class='ui button' title='Ver historial de este lugar'><i class='history icon'></i>Historial</button></td></tr>":"<td>Sin prestamos activos</td><td class='center aligned'><button id='hist_lug_"+d.id_lugar+"' class='ui button' title='Ver historial de este lugar'><i class='history icon'></i>Historial</button></td></tr>",$(f).appendTo("#t_lugares tbody")}}),incluirPaginador("#t_lugares","#paginadorLugares");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_lugares").css("visibility","visible")})}function loadLugaresHistorial(a,b){var c="../function/loadLugarHist.php?id="+b;$("#t_lugares_hist tbody").html("");var d=0;$.ajax({url:c,beforeSend:Loader}).done(function(b){var c=$.parseJSON(b);if($("#lugares_container_hist > p > strong").html(a),0==c.length){var e="<tr class='center'><td colspan='6'>ERROR AL CARGAR LOS PRESTAMOS.</td></tr>";$(e).appendTo("#t_lugares_hist tbody")}else $.each(c,function(a,b){if(0!=a&&b.id_prestamo==c[a-1].id_prestamo)$("table[id = t_lugares_hist]>tbody>tr[data-value='"+b.id_prestamo+"']>td:first").append(" &nbsp;||&nbsp; "+b.descripcion);else{var e;if(b.fecha_devolucion?e=b.fecha_devolucion:(e="No devuelto",d=1),1==d){var f="<tr class='negative' data-value='"+b.id_prestamo+"'>";d=0}else var f="<tr data-value='"+b.id_prestamo+"'>";f+="<td>"+b.descripcion+"</td><td>"+b.nombre+"</td><td>"+b.fecha_prestamo+"</td><td>"+e+"</td>",$(f).appendTo("#t_lugares_hist tbody")}}),incluirPaginador("#t_lugares_hist","#paginadorLugaresHist");$(".section").css("visibility","hidden"),$(".section").css("display","none"),$("#t_lugares_hist").css("visibility","visible")})}$(document).ready(function(){$("#side_administrar").hide(),$("#side_prestamos").hide(),$("#side_materiales").hide(),$("#side_personas").hide(),$("#side_lugares").hide(),$("#materiales_container_hist").hide(),$("#personas_container_hist").hide(),$("#lugares_container_hist").hide(),$("#side_administrar").show(),$("#btn_administrar").addClass("active"),$(document).on("click","#administrar_container .ui.icon.top.right.pointing.dropdown",function(){$("#btn_admin_addpres").removeClass("active selected")}),$(document).on("click","#btn_prestamos",function(){$("#side_prestamos").show(),$("#side_materiales").hide(),$("#side_personas").hide(),$("#side_lugares").hide(),$("#side_administrar").hide(),$(".toggle").checkbox("is checked")?loadList(1):loadList(0)}),$(document).on("click","#btn_materiales",function(){$("#side_prestamos").hide(),$("#side_materiales").show(),$("#side_personas").hide(),$("#side_lugares").hide(),$("#side_administrar").hide(),$("#materiales_container_hist").hide(),$("#materiales_container").show(),loadMateriales()}),$(document).on("click","#btn_personas",function(){$("#side_prestamos").hide(),$("#side_materiales").hide(),$("#side_personas").show(),$("#side_lugares").hide(),$("#side_administrar").hide(),$("#personas_container_hist").hide(),$("#personas_container").show(),loadPersonas()}),$(document).on("click","#btn_lugares",function(){$("#side_prestamos").hide(),$("#side_materiales").hide(),$("#side_personas").hide(),$("#side_lugares").show(),$("#side_administrar").hide(),$("#lugares_container_hist").hide(),$("#lugares_container").show(),loadLugares()}),$(document).on("click","#btn_administrar, .logo",function(){$("#side_prestamos").hide(),$("#side_materiales").hide(),$("#side_personas").hide(),$("#side_lugares").hide(),$("#side_administrar").show(),$("#administrar_container").show(),$("#btn_prestamos, #btn_materiales, #btn_personas, #btn_lugares, #btn_administrar").removeClass("active"),$("#btn_administrar").addClass("active")}),$(document).on("click","#btn_prestamos, #btn_materiales, #btn_personas, #btn_lugares",function(a){$("#btn_prestamos, #btn_materiales, #btn_personas, #btn_lugares, #btn_administrar").removeClass("active"),$(this).addClass("active")}),$(document).on("click","button[id ^= hist_mat_]",function(a){$("#materiales_container").hide(),$("#materiales_container_hist").show();var b=$(this).parents("tr").find("td:first").html(),c=$(this).parents("tr").attr("data-value");loadMaterialesHistorial(b,c)}),$(document).on("click","#volver_m",function(a){$("#materiales_container_hist").hide(),$("#materiales_container").show()}),$(document).on("click","button[id ^= hist_pers_]",function(a){$("#personas_container").hide(),$("#personas_container_hist").show();var b=$(this).parents("tr").find("td:first").html(),c=$(this).parents("tr").attr("data-value");loadPersonasHistorial(b,c)}),$(document).on("click","#volver_p",function(a){$("#personas_container_hist").hide(),$("#personas_container").show()}),$(document).on("click","button[id ^= hist_lug_]",function(a){$("#lugares_container").hide(),$("#lugares_container_hist").show();var b=$(this).parents("tr").find("td:first").html(),c=$(this).parents("tr").attr("data-value");loadLugaresHistorial(b,c)}),$(document).on("click","#volver_l",function(a){$("#lugares_container_hist").hide(),$("#lugares_container").show()}),"SI"==getCookie("delPrestamoOK")?($("#side_administrar").hide(),$("#btn_administrar").removeClass("active"),$("#side_prestamos").show(),$("#btn_prestamos").addClass("active"),$("#advdel").css("display","block"),$("#advdel").css("visibility","visible"),$("#advdel").delay(5e3).queue(function(a){$(this).css("visibility","hidden"),a()}),document.cookie="delPrestamoOK=NO"):($("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#addprestamo_segment").show(),$("#erraddprestamo").fadeOut(0),$("#btn_admin_pres").addClass("active")),$(document).on("click","#btn_admin_pres",function(){$("#prestamos_segment").show(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_pres").addClass("active")}),$(document).on("click","#btn_admin_mat",function(){$("#prestamos_segment").hide(),$("#materiales_segment").show(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_mat").addClass("active")}),$(document).on("click","#btn_admin_per",function(){$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").show(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_per").addClass("active")}),$(document).on("click","#btn_admin_lug",function(){$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").show(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_lug").addClass("active")}),$(document).on("click","#btn_admin_usu",function(){$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").show(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_usu").addClass("active")}),$(document).on("click","#btn_admin_addpres",function(){$("#addprestamo").submit(function(){return!1}),$("#erraddprestamo").fadeOut(0),$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").show(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$("#btn_admin_pres").addClass("active")}),$(document).on("click","#btn_admin_addmat",function(){$("#addmaterial").submit(function(){return!1}),$("#erraddmat").fadeOut(0),$("#erraddmaterial").fadeOut(0),$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").show(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$("#btn_admin_mat").addClass("active")}),$(document).on("click","#btn_admin_addper",function(){$("#addpersona").submit(function(){return!1}),$("#erraddper").fadeOut(0),$("#erraddpersona").fadeOut(0),$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").show(),$("#addlugar_segment").hide(),$("#addusuario_segment").hide(),$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$("#btn_admin_per").addClass("active")}),$(document).on("click","#btn_admin_addlug",function(){$("#addlugar").submit(function(){return!1}),$("#erraddlug").fadeOut(0),$("#erraddlugar").fadeOut(0),$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").show(),$("#addusuario_segment").hide(),$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$("#btn_admin_lug").addClass("active")}),$(document).on("click","#btn_admin_addusu",function(){$("#addusuario").submit(function(){return!1}),$("#erraddusu").fadeOut(0),$("#erraddusupass").fadeOut(0),$("#erraddusuname").fadeOut(0),$("#prestamos_segment").hide(),$("#materiales_segment").hide(),$("#personas_segment").hide(),$("#lugares_segment").hide(),$("#usuarios_segment").hide(),$("#addprestamo_segment").hide(),$("#addmaterial_segment").hide(),$("#addpersona_segment").hide(),$("#addlugar_segment").hide(),$("#addusuario_segment").show(),$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$("#btn_admin_usu").addClass("active")}),$(document).on("click","#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu",function(a){$("#btn_admin_pres, #btn_admin_mat, #btn_admin_per, #btn_admin_lug, #btn_admin_usu").removeClass("active"),$(this).addClass("active")})});